## 文件操作

**定义数据流对象指针** 

对文件进行读写操作首先必须要定义一个数据流对象指针，数据流对象指针有三种类型

| 数据流对象指针 |                                                    |
| -------------- | -------------------------------------------------- |
| ofstream       | 文件写入流，使用的时候必须包含头文件“ofstream”     |
| ifstream       | 读取文件流，使用的时候必须包含头文件“ifstream”     |
| fstream        | 文件读取/写入流，使用的时候必须包含头文件“fstream” |



**打开文件** 

打开文件可以调用两个函数，其一是使用open函数，其二是使用数据流对象的构造函数。

```c++
void open(const char * filename, ios_base::openmode mode = ios_base::in | ios_base::out);

void open(const wchar_t *_Filename, ios_base::openmode mode = ios_base::in | ios_base::out, int prot = ios_base::_Openprot);
```

参数filename表示文件名，如果该文件在目录中不存在，那么该函数会自动创建该文件；

参数mode表示打开方式，可以被组合使用，中间以”或”操作符(|)间隔；

参数prot表示文件打开的属性，基本上很少用到。

| mode        |                              |
| ----------- | ---------------------------- |
| ios::in     | 为输入(读)而打开文件         |
| ios::out    | 为输出(写)而打开文件         |
| ios::ate    | 初始位置：文件尾             |
| ios::app    | 所有输出附加在文件末尾       |
| ios::trunc  | 如果文件已存在则先删除该文件 |
| ios::binary | 二进制方式                   |



**文件读写** 

由于类ofstream, ifstream 和fstream 是分别从ostream, istream 和iostream 中引申而来的，所以文件的读写操作与使用控制台函数cin和cout一样，“<<”表示对文件进行写操作，“>>”表示对文件进行读操作。

根据数据流读写的状态，有4个验证函数，它们分别是：

| 验证函数   |                                                              |
| ---------- | ------------------------------------------------------------ |
| **bad()**  | 如果在读写过程中出错，返回 true                              |
| **fail()** | 除了与bad() 同样的情况下会返回 true 以外，加上格式错误时也返回true |
| **eof()**  | 如果读文件到达文件末尾，返回true                             |
| **good()** | 如果调用以上任何一个函数返回true 的话，此函数返回 false      |



**获得/设置流指针** 

获得流指针的位置有两个函数

| 函数             | 返回值        |                          |
| ---------------- | ------------- | ------------------------ |
| **Long tellg()** | pos_type 类型 | 代表当前get 流指针的位置 |
| **long tellp()** | pos_type 类型 | 代表当前put 流指针的位置 |

设置流指针的位置根据输入输出流指针类型不同，也有两个函数

| 函数    |                     |
| ------- | ------------------- |
| seekg() | 改变流指针get的位置 |
| seekp() | 改变流指针put的位置 |

seekg ( off_type offset, seekdir direction )；

seekp ( off_type offset, seekdir direction )；

使用这个原型可以指定由参数direction决定的一个具体的指针开始计算的一个位移(offset)

| direction |                                |
| --------- | ------------------------------ |
| ios::beg  | 从流开始位置计算的位移         |
| ios::cur  | 从流指针当前位置开始计算的位移 |
| ios::end  | 从流末尾处开始计算的位移       |



**关闭文件** 

调用函数close()，可以关闭流对象所指向的文件，释放流指针之后，那么该数据流就可以指向其它的文件进行操作



## bitset

`bitset`所在头文件`<bitset>`

**初始化bitset对象的方法** 

| 初始化方法              | 说明                             |
| ----------------------- | -------------------------------- |
| bitset<n> b;            | b有n位，每位都为0                |
| bitset<n> b(u);         | b是unsigned long型u的一个副本    |
| bitset<n> b(s);         | b是string对象s中含有的位串的副本 |
| bitset<n> b(s, pos, n); | b是s中从位置pos开始的n个位的副本 |

**bitset操作** 

| 成员函数      | 函数功能                                       |
| ------------- | ---------------------------------------------- |
| b.any()       | 是否存在值为1的二进制位                        |
| b.none()      | 是否不存在值为1的二进制位，或者说是否全部位为0 |
| b.count()     | 置为1的二进制位的个数                          |
| b.size()      | 二进制位的个数                                 |
| b[pos]        | 访问在pos处的二进制位                          |
| b.test(pos)   | 在pos处的二进制位是否为1                       |
| b.set()       | 所有二进制位都置为1                            |
| b.set(pos)    | pos处的二进制位置为1                           |
| b.reset()     | 全部位置0                                      |
| b.reset(pos)  | pos位处的二进制位置与0做或运算                 |
| b.flip()      | 全部位逐位取反                                 |
| b.flip(pos)   | pos处的二进制位取反                            |
| b.to_ulong()  | 将二进制转换为unsigned long输出                |
| b.to_string() | 将二进制转换为字符串输出                       |
| ~b            | 按位取反，效果等效为bs.flip()                  |
| os << b       | 将二进制位输出到os流，小值在右，大值在左       |

